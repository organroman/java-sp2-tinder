package servlets;

import models.User;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.HashMap;

public class UserServlet extends HttpServlet {
    private final TemplateEngine te;

    public UserServlet(TemplateEngine te) {
        this.te = te;
    }
    int i = 0;

    ArrayList<User> items2 = new ArrayList<>();
    {
        User user1 = new User(1, "GLB", "https://corp.globino.ua/wp-content/uploads/2020/05/logo.png");
        User user2 = new User(2, "MXP", "https://stud-point.com/wp-content/uploads/2024/01/logo_MKHP.png");
        User user3 = new User(3, "Farro", "data:image/jpeg;base64,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");

        items2.add(user1);
        items2.add(user2);
        items2.add(user3);
    }


    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        HashMap<String, Object> map = new HashMap<>();
        map.put("items2", items2.get(i));

        map.put("name", items2.get(i).getName());
        map.put("logo", items2.get(i).getImgUrl());
        map.put("id", items2.get(i).getId());

        try (PrintWriter out = resp.getWriter()) {
            te.render("user.ftl", map, out);

        }
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        if (null != req.getParameter("x")) {
            try (PrintWriter out = resp.getWriter()) {
                HashMap<String, Object> map = new HashMap<>();
                if (i!=items2.size()-1) i++;
                else i=0;
                map.put("name", items2.get(i).getName());
                map.put("logo", items2.get(i).getImgUrl());
                map.put("id", items2.get(i).getId());
                te.render("user.ftl", map, out);
            }
        } else resp.sendRedirect("/");
    }
}